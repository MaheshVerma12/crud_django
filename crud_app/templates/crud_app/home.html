{% extends "crud_app/base.html" %}
{% block title %}
Home
{% endblock title %}
{% block content %}
<link rel ="stylesheet" type = "text/css" href ="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script src = "https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<h2 class="fw-bold text-center bg-info">Student Information </h2>
<!-- Table section start -->
<div class="container bg-info mx-auto">
    <div class="row mx-auto my-6">
        <div class="col-10 mx-auto my-6">
            <table class="table" id="myTable">
  <thead>
    <tr>
      <th scope="col">S.No.</th>
      <th scope="col">ID</th>
      <th scope="col">Name</th>
      <th scope="col">Age</th>
      <th scope="col">Email</th>
      <th scope="col">Profile Image</th>
      <th scope="col">Profile Video</th>
      <th scope="col">Message</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for i in data %}
    <tr>
      <td>{{forloop.counter}}</td>
      <td>{{i.id}}</td>
      <td>{{i.name}}</td>
      <td>{{i.age}}</td>
      <td>{{i.email}}</td>
      <td>
          {% if i.profile %}
            <img src="{{i.profile.url}}" alt="" height="100px" width="100px">
            {% else %}
            No Image
          {% endif %}

      </td>
      <td>
          {% if i.profile_video %}
            <video src="{{i.profile_video.url}}" alt="" height="200px" width="200px" controls></video>
            {% else %}
            No Video 
          {% endif %}

      </td>
      <td>{{i.message}}</td>
      <td>
        <a href="{% url 'edit' i.id %}"><button class="btn btn-primary"><i class="fa-solid fa-pen-to-square"></i> Edit</button></a> <a href="{% url 'delete' i.id %}"><button class="btn btn-danger"><i class="fa-solid fa-trash"></i> Delete</button></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
        </div>
    </div>
    </div>
<!--table section ends -->
<div class="container bg-info my-2">
  <div class="row mx-auto">
    <div class="col-6 mx-auto">
      <h3 class="text-white">See deleted data</h3> <a href="{% url 'deleted_data' %}"><i class="fa-solid fa-trash text-white"></i></a>
    </div>
  </div>
</div>

<script>
  // A $( document ).ready() block.
$( document ).ready(function() {
      let table = new DataTable('#myTable');

});
</script>

{% endblock content %}